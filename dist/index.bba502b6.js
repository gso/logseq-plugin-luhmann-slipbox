var e=globalThis,t={},r={},n=e.parcelRequirec2a5;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},e.parcelRequirec2a5=n),(0,n.register)("cVm5l",function(t,r){/*! For license information please see lsplugin.user.js.LICENSE.txt */self,t.exports=(()=>{var n={227:(e,t,r)=>{let n;var o=r(155);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))}),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==o&&"env"in o&&(e=o.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(n=!1,()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(447)(t);let{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},447:(e,t,r)=>{e.exports=function(e){function t(e){let r,o=null;function i(...e){if(!i.enabled)return;let n=Number(new Date),o=n-(r||n);i.diff=o,i.prev=r,i.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,n)=>{if("%%"===r)return"%";a++;let o=t.formatters[n];if("function"==typeof o){let t=e[a];r=o.call(i,t),e.splice(a,1),a--}return r}),t.formatArgs.call(i,e),(i.log||t.log).apply(i,e)}return i.namespace=e,i.useColors=t.useColors(),i.color=t.selectColor(e),i.extend=n,i.destroy=t.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?t.enabled(e):o,set:e=>{o=e}}),"function"==typeof t.init&&t.init(i),i}function n(e,r){let n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(o),...t.skips.map(o).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.names=[],t.skips=[];let n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.substr(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let r,n;if("*"===e[e.length-1])return!0;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},856:function(e){e.exports=function(){var e=Object.hasOwnProperty,t=Object.setPrototypeOf,r=Object.isFrozen,n=Object.getPrototypeOf,o=Object.getOwnPropertyDescriptor,i=Object.freeze,a=Object.seal,s=Object.create,l="undefined"!=typeof Reflect&&Reflect,c=l.apply,u=l.construct;c||(c=function(e,t,r){return e.apply(t,r)}),i||(i=function(e){return e}),a||(a=function(e){return e}),u||(u=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t))))});var p,d=x(Array.prototype.forEach),f=x(Array.prototype.pop),h=x(Array.prototype.push),m=x(String.prototype.toLowerCase),g=x(String.prototype.match),y=x(String.prototype.replace),v=x(String.prototype.indexOf),b=x(String.prototype.trim),_=x(RegExp.prototype.test),w=(p=TypeError,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return u(p,t)});function x(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return c(e,t,n)}}function C(e,n){t&&t(e,null);for(var o=n.length;o--;){var i=n[o];if("string"==typeof i){var a=m(i);a!==i&&(r(n)||(n[o]=a),i=a)}e[i]=!0}return e}function S(t){var r=s(null),n=void 0;for(n in t)c(e,t,[n])&&(r[n]=t[n]);return r}function O(e,t){for(;null!==e;){var r=o(e,t);if(r){if(r.get)return x(r.get);if("function"==typeof r.value)return x(r.value)}e=n(e)}return function(e){return console.warn("fallback value for",e),null}}var A=i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),T=i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),j=i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),E=i(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),k=i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),F=i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),L=i(["#text"]),I=i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),M=i(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),N=i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),R=i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),D=a(/\{\{[\s\S]*|[\s\S]*\}\}/gm),U=a(/<%[\s\S]*|[\s\S]*%>/gm),z=a(/^data-[\-\w.\u00B7-\uFFFF]/),P=a(/^aria-[\-\w]+$/),$=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H=a(/^(?:\w+script|data):/i),q=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function W(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var G=function(e,t){if("object"!==(void 0===e?"undefined":B(e))||"function"!=typeof e.createPolicy)return null;var r=null,n="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(n)&&(r=t.currentScript.getAttribute(n));var o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,r=function(t){return e(t)};if(r.version="2.3.1",r.removed=[],!t||!t.document||9!==t.document.nodeType)return r.isSupported=!1,r;var n=t.document,o=t.document,a=t.DocumentFragment,s=t.HTMLTemplateElement,l=t.Node,c=t.Element,u=t.NodeFilter,p=t.NamedNodeMap,x=void 0===p?t.NamedNodeMap||t.MozNamedAttrMap:p,J=t.Text,Z=t.Comment,V=t.DOMParser,K=t.trustedTypes,Y=c.prototype,X=O(Y,"cloneNode"),Q=O(Y,"nextSibling"),ee=O(Y,"childNodes"),et=O(Y,"parentNode");if("function"==typeof s){var er=o.createElement("template");er.content&&er.content.ownerDocument&&(o=er.content.ownerDocument)}var en=G(K,n),eo=en&&ek?en.createHTML(""):"",ei=o,ea=ei.implementation,es=ei.createNodeIterator,el=ei.createDocumentFragment,ec=ei.getElementsByTagName,eu=n.importNode,ep={};try{ep=S(o).documentMode?o.documentMode:{}}catch(e){}var ed={};r.isSupported="function"==typeof et&&ea&&void 0!==ea.createHTMLDocument&&9!==ep;var ef=$,eh=null,em=C({},[].concat(W(A),W(T),W(j),W(k),W(L))),eg=null,ey=C({},[].concat(W(I),W(M),W(N),W(R))),ev=null,eb=null,e_=!0,ew=!0,ex=!1,eC=!1,eS=!1,eO=!1,eA=!1,eT=!1,ej=!1,eE=!0,ek=!1,eF=!0,eL=!0,eI=!1,eM={},eN=null,eR=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),eD=null,eU=C({},["audio","video","img","source","image","track"]),ez=null,eP=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),e$="http://www.w3.org/1998/Math/MathML",eH="http://www.w3.org/2000/svg",eq="http://www.w3.org/1999/xhtml",eB=eq,eW=!1,eG=null,eJ=o.createElement("form"),eZ=function(e){eG&&eG===e||(e&&"object"===(void 0===e?"undefined":B(e))||(e={}),eh="ALLOWED_TAGS"in(e=S(e))?C({},e.ALLOWED_TAGS):em,eg="ALLOWED_ATTR"in e?C({},e.ALLOWED_ATTR):ey,ez="ADD_URI_SAFE_ATTR"in e?C(S(eP),e.ADD_URI_SAFE_ATTR):eP,eD="ADD_DATA_URI_TAGS"in e?C(S(eU),e.ADD_DATA_URI_TAGS):eU,eN="FORBID_CONTENTS"in e?C({},e.FORBID_CONTENTS):eR,ev="FORBID_TAGS"in e?C({},e.FORBID_TAGS):{},eb="FORBID_ATTR"in e?C({},e.FORBID_ATTR):{},eM="USE_PROFILES"in e&&e.USE_PROFILES,e_=!1!==e.ALLOW_ARIA_ATTR,ew=!1!==e.ALLOW_DATA_ATTR,ex=e.ALLOW_UNKNOWN_PROTOCOLS||!1,eC=e.SAFE_FOR_TEMPLATES||!1,eS=e.WHOLE_DOCUMENT||!1,eT=e.RETURN_DOM||!1,ej=e.RETURN_DOM_FRAGMENT||!1,eE=!1!==e.RETURN_DOM_IMPORT,ek=e.RETURN_TRUSTED_TYPE||!1,eA=e.FORCE_BODY||!1,eF=!1!==e.SANITIZE_DOM,eL=!1!==e.KEEP_CONTENT,eI=e.IN_PLACE||!1,ef=e.ALLOWED_URI_REGEXP||ef,eB=e.NAMESPACE||eq,eC&&(ew=!1),ej&&(eT=!0),eM&&(eh=C({},[].concat(W(L))),eg=[],!0===eM.html&&(C(eh,A),C(eg,I)),!0===eM.svg&&(C(eh,T),C(eg,M),C(eg,R)),!0===eM.svgFilters&&(C(eh,j),C(eg,M),C(eg,R)),!0===eM.mathMl&&(C(eh,k),C(eg,N),C(eg,R))),e.ADD_TAGS&&(eh===em&&(eh=S(eh)),C(eh,e.ADD_TAGS)),e.ADD_ATTR&&(eg===ey&&(eg=S(eg)),C(eg,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&C(ez,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(eN===eR&&(eN=S(eN)),C(eN,e.FORBID_CONTENTS)),eL&&(eh["#text"]=!0),eS&&C(eh,["html","head","body"]),eh.table&&(C(eh,["tbody"]),delete ev.tbody),i&&i(e),eG=e)},eV=C({},["mi","mo","mn","ms","mtext"]),eK=C({},["foreignobject","desc","title","annotation-xml"]),eY=C({},T);C(eY,j),C(eY,E);var eX=C({},k);C(eX,F);var eQ=function(e){var t=et(e);t&&t.tagName||(t={namespaceURI:eq,tagName:"template"});var r=m(e.tagName),n=m(t.tagName);if(e.namespaceURI===eH)return t.namespaceURI===eq?"svg"===r:t.namespaceURI===e$?"svg"===r&&("annotation-xml"===n||eV[n]):!!eY[r];if(e.namespaceURI===e$)return t.namespaceURI===eq?"math"===r:t.namespaceURI===eH?"math"===r&&eK[n]:!!eX[r];if(e.namespaceURI===eq){if(t.namespaceURI===eH&&!eK[n]||t.namespaceURI===e$&&!eV[n])return!1;var o=C({},["title","style","font","a","script"]);return!eX[r]&&(o[r]||!eY[r])}return!1},e0=function(e){h(r.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=eo}catch(t){e.remove()}}},e1=function(e,t){try{h(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){h(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!eg[e]){if(eT||ej)try{e0(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}},e3=function(e){var t=void 0,r=void 0;if(eA)e="<remove></remove>"+e;else{var n=g(e,/^[\r\n\t ]+/);r=n&&n[0]}var i=en?en.createHTML(e):e;if(eB===eq)try{t=(new V).parseFromString(i,"text/html")}catch(e){}if(!t||!t.documentElement){t=ea.createDocument(eB,"template",null);try{t.documentElement.innerHTML=eW?"":i}catch(e){}}var a=t.body||t.documentElement;return e&&r&&a.insertBefore(o.createTextNode(r),a.childNodes[0]||null),eB===eq?ec.call(t,eS?"html":"body")[0]:eS?t.documentElement:a},e9=function(e){return es.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},e2=function(e){return"object"===(void 0===l?"undefined":B(l))?e instanceof l:e&&"object"===(void 0===e?"undefined":B(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},e6=function(e,t,n){ed[e]&&d(ed[e],function(e){e.call(r,t,n,eG)})},e5=function(e){var t=void 0;if(e6("beforeSanitizeElements",e,null),!(e instanceof J||e instanceof Z||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof x&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)||g(e.nodeName,/[\u0080-\uFFFF]/))return e0(e),!0;var n=m(e.nodeName);if(e6("uponSanitizeElement",e,{tagName:n,allowedTags:eh}),!e2(e.firstElementChild)&&(!e2(e.content)||!e2(e.content.firstElementChild))&&_(/<[/\w]/g,e.innerHTML)&&_(/<[/\w]/g,e.textContent)||"select"===n&&_(/<template/i,e.innerHTML))return e0(e),!0;if(!eh[n]||ev[n]){if(eL&&!eN[n]){var o=et(e)||e.parentNode,i=ee(e)||e.childNodes;if(i&&o)for(var a=i.length-1;a>=0;--a)o.insertBefore(X(i[a],!0),Q(e))}return e0(e),!0}return e instanceof c&&!eQ(e)?(e0(e),!0):("noscript"===n||"noembed"===n)&&_(/<\/no(script|embed)/i,e.innerHTML)?(e0(e),!0):(eC&&3===e.nodeType&&(t=y(t=e.textContent,D," "),t=y(t,U," "),e.textContent!==t&&(h(r.removed,{element:e.cloneNode()}),e.textContent=t)),e6("afterSanitizeElements",e,null),!1)},e4=function(e,t,r){if(eF&&("id"===t||"name"===t)&&(r in o||r in eJ))return!1;if(ew&&!eb[t]&&_(z,t));else if(e_&&_(P,t));else{if(!eg[t]||eb[t])return!1;if(ez[t]);else if(_(ef,y(r,q,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==v(r,"data:")||!eD[e]){if(ex&&!_(H,y(r,q,"")));else if(r)return!1}}return!0},e8=function(e){var t=void 0,n=void 0,o=void 0,i=void 0;e6("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:eg};for(i=a.length;i--;){var l=t=a[i],c=l.name,u=l.namespaceURI;if(n=b(t.value),o=m(c),s.attrName=o,s.attrValue=n,s.keepAttr=!0,s.forceKeepAttr=void 0,e6("uponSanitizeAttribute",e,s),n=s.attrValue,!s.forceKeepAttr&&(e1(c,e),s.keepAttr)){if(_(/\/>/i,n))e1(c,e);else if(eC&&(n=y(n,D," "),n=y(n,U," ")),e4(e.nodeName.toLowerCase(),o,n))try{u?e.setAttributeNS(u,c,n):e.setAttribute(c,n),f(r.removed)}catch(e){}}}e6("afterSanitizeAttributes",e,null)}},e7=function e(t){var r=void 0,n=e9(t);for(e6("beforeSanitizeShadowDOM",t,null);r=n.nextNode();)e6("uponSanitizeShadowNode",r,null),e5(r)||(r.content instanceof a&&e(r.content),e8(r));e6("afterSanitizeShadowDOM",t,null)};return r.sanitize=function(e,o){var i=void 0,s=void 0,c=void 0,u=void 0,p=void 0;if((eW=!e)&&(e="<!-->"),"string"!=typeof e&&!e2(e)){if("function"!=typeof e.toString)throw w("toString is not a function");if("string"!=typeof(e=e.toString()))throw w("dirty is not a string, aborting")}if(!r.isSupported){if("object"===B(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(e2(e))return t.toStaticHTML(e.outerHTML)}return e}if(eO||eZ(o),r.removed=[],"string"==typeof e&&(eI=!1),eI);else if(e instanceof l)1===(s=(i=e3("<!---->")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?i=s:i.appendChild(s);else{if(!eT&&!eC&&!eS&&-1===e.indexOf("<"))return en&&ek?en.createHTML(e):e;if(!(i=e3(e)))return eT?null:eo}i&&eA&&e0(i.firstChild);for(var d=e9(eI?e:i);c=d.nextNode();)3===c.nodeType&&c===u||e5(c)||(c.content instanceof a&&e7(c.content),e8(c),u=c);if(u=null,eI)return e;if(eT){if(ej)for(p=el.call(i.ownerDocument);i.firstChild;)p.appendChild(i.firstChild);else p=i;return eE&&(p=eu.call(n,p,!0)),p}var f=eS?i.outerHTML:i.innerHTML;return eC&&(f=y(f,D," "),f=y(f,U," ")),en&&ek?en.createHTML(f):f},r.setConfig=function(e){eZ(e),eO=!0},r.clearConfig=function(){eG=null,eO=!1},r.isValidAttribute=function(e,t,r){return eG||eZ({}),e4(m(e),m(t),r)},r.addHook=function(e,t){"function"==typeof t&&(ed[e]=ed[e]||[],h(ed[e],t))},r.removeHook=function(e){ed[e]&&f(ed[e])},r.removeHooks=function(e){ed[e]&&(ed[e]=[])},r.removeAllHooks=function(){ed={}},r}()}()},729:e=>{var t=Object.prototype.hasOwnProperty,r="~";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,a){if("function"!=typeof n)throw TypeError("The listener must be a function");var s=new o(n,i||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,o=[];if(0===this._eventsCount)return o;for(n in e=this._events)t.call(e,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=Array(i);o<i;o++)a[o]=n[o].fn;return a},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,o,i,a){var s=r?r+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],p=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),p){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,o),!0;case 5:return u.fn.call(u.context,t,n,o,i),!0;case 6:return u.fn.call(u.context,t,n,o,i,a),!0}for(c=1,l=Array(p-1);c<p;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),p){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,o);break;default:if(!l)for(d=1,l=Array(p-1);d<p;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||n&&s.context!==n||a(this,i);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||o&&!s[l].once||n&&s[l].context!==n)&&c.push(s[l]);c.length?this._events[i]=1===c.length?c[0]:c:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},717:e=>{"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},824:e=>{function t(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var n,o,i=typeof e;if("string"===i&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===i&&isFinite(e))return r.long?(o=Math.abs(e))>=864e5?t(e,o,864e5,"day"):o>=36e5?t(e,o,36e5,"hour"):o>=6e4?t(e,o,6e4,"minute"):o>=1e3?t(e,o,1e3,"second"):e+" ms":(n=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":n>=36e5?Math.round(e/36e5)+"h":n>=6e4?Math.round(e/6e4)+"m":n>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},520:(e,t,r)=>{var n=r(155),o="win32"===n.platform,i=r(539);function a(e,t){for(var r=[],n=0;n<e.length;n++){var o=e[n];o&&"."!==o&&(".."===o?r.length&&".."!==r[r.length-1]?r.pop():t&&r.push(".."):r.push(o))}return r}function s(e){for(var t=e.length-1,r=0;r<=t&&!e[r];r++);for(var n=t;n>=0&&!e[n];n--);return 0===r&&n===t?e:r>n?[]:e.slice(r,n+1)}var l=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,c=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,u={};function p(e){var t=l.exec(e),r=(t[1]||"")+(t[2]||""),n=t[3]||"",o=c.exec(n);return[r,o[1],o[2],o[3]]}function d(e){var t=l.exec(e),r=t[1]||"",n=!!r&&":"!==r[1];return{device:r,isUnc:n,isAbsolute:n||!!t[2],tail:t[3]}}function f(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}u.resolve=function(){for(var e,t="",r="",o=!1,s=arguments.length-1;s>=-1;s--){if(s>=0?e=arguments[s]:t?(e=n.env["="+t])&&e.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(e=t+"\\"):e=n.cwd(),!i.isString(e))throw TypeError("Arguments to path.resolve must be strings");if(e){var l=d(e),c=l.device,u=l.isUnc,p=l.isAbsolute,h=l.tail;if((!c||!t||c.toLowerCase()===t.toLowerCase())&&(t||(t=c),o||(r=h+"\\"+r,o=p),t&&o))break}}return u&&(t=f(t)),t+(o?"\\":"")+(r=a(r.split(/[\\\/]+/),!o).join("\\"))||"."},u.normalize=function(e){var t=d(e),r=t.device,n=t.isUnc,o=t.isAbsolute,i=t.tail,s=/[\\\/]$/.test(i);return(i=a(i.split(/[\\\/]+/),!o).join("\\"))||o||(i="."),i&&s&&(i+="\\"),n&&(r=f(r)),r+(o?"\\":"")+i},u.isAbsolute=function(e){return d(e).isAbsolute},u.join=function(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(!i.isString(r))throw TypeError("Arguments to path.join must be strings");r&&e.push(r)}var n=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(n=n.replace(/^[\\\/]{2,}/,"\\")),u.normalize(n)},u.relative=function(e,t){e=u.resolve(e),t=u.resolve(t);for(var r=e.toLowerCase(),n=t.toLowerCase(),o=s(t.split("\\")),i=s(r.split("\\")),a=s(n.split("\\")),l=Math.min(i.length,a.length),c=l,p=0;p<l;p++)if(i[p]!==a[p]){c=p;break}if(0==c)return t;var d=[];for(p=c;p<i.length;p++)d.push("..");return(d=d.concat(o.slice(c))).join("\\")},u._makeLong=function(e){if(!i.isString(e))return e;if(!e)return"";var t=u.resolve(e);return/^[a-zA-Z]\:\\/.test(t)?"\\\\?\\"+t:/^\\\\[^?.]/.test(t)?"\\\\?\\UNC\\"+t.substring(2):e},u.dirname=function(e){var t=p(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},u.basename=function(e,t){var r=p(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},u.extname=function(e){return p(e)[3]},u.format=function(e){if(!i.isObject(e))throw TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!i.isString(t))throw TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var r=e.dir,n=e.base||"";return r?r[r.length-1]===u.sep?r+n:r+u.sep+n:n},u.parse=function(e){if(!i.isString(e))throw TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=p(e);if(!t||4!==t.length)throw TypeError("Invalid path '"+e+"'");return{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},u.sep="\\",u.delimiter=";";var h=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,m={};function g(e){return h.exec(e).slice(1)}m.resolve=function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var o=r>=0?arguments[r]:n.cwd();if(!i.isString(o))throw TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,t="/"===o[0])}return(t?"/":"")+(e=a(e.split("/"),!t).join("/"))||"."},m.normalize=function(e){var t=m.isAbsolute(e),r=e&&"/"===e[e.length-1];return(e=a(e.split("/"),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},m.isAbsolute=function(e){return"/"===e.charAt(0)},m.join=function(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];if(!i.isString(r))throw TypeError("Arguments to path.join must be strings");r&&(e+=e?"/"+r:r)}return m.normalize(e)},m.relative=function(e,t){e=m.resolve(e).substr(1),t=m.resolve(t).substr(1);for(var r=s(e.split("/")),n=s(t.split("/")),o=Math.min(r.length,n.length),i=o,a=0;a<o;a++)if(r[a]!==n[a]){i=a;break}var l=[];for(a=i;a<r.length;a++)l.push("..");return(l=l.concat(n.slice(i))).join("/")},m._makeLong=function(e){return e},m.dirname=function(e){var t=g(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},m.basename=function(e,t){var r=g(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},m.extname=function(e){return g(e)[3]},m.format=function(e){if(!i.isObject(e))throw TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!i.isString(t))throw TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);return(e.dir?e.dir+m.sep:"")+(e.base||"")},m.parse=function(e){if(!i.isString(e))throw TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=g(e);if(!t||4!==t.length)throw TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},m.sep="/",m.delimiter=":",e.exports=o?u:m,e.exports.posix=m,e.exports.win32=u},155:e=>{var t,r,n=e.exports={};function o(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var s,l=[],c=!1,u=-1;function p(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&d())}function d(){if(!c){var e=a(p);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||c||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}},384:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},539:(e,t,r)=>{var n=r(155),o=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(s(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(o,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),l=n[r];r<i;l=n[++r])m(l)||!_(l)?a+=" "+l:a+=" "+s(l);return a},t.deprecate=function(e,o){if(v(r.g.process))return function(){return t.deprecate(e,o).apply(this,arguments)};if(!0===n.noDeprecation)return e;var i=!1;return function(){if(!i){if(n.throwDeprecation)throw Error(o);n.traceDeprecation?console.trace(o):console.error(o),i=!0}return e.apply(this,arguments)}};var i,a={};function s(e,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(r)?n.showHidden=r:r&&t._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),u(n,e,n.depth)}function l(e,t){var r=s.styles[t];return r?"\x1b["+s.colors[r][0]+"m"+e+"\x1b["+s.colors[r][1]+"m":e}function c(e,t){return e}function u(e,r,n){if(e.customInspect&&r&&C(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o,i,a=r.inspect(n,e);return y(a)||(a=u(e,a,n)),a}var s=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return g(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(e,r);if(s)return s;var l=Object.keys(r),c=(S={},l.forEach(function(e,t){S[e]=!0}),S);if(e.showHidden&&(l=Object.getOwnPropertyNames(r)),x(r)&&(l.indexOf("message")>=0||l.indexOf("description")>=0))return p(r);if(0===l.length){if(C(r)){var _=r.name?": "+r.name:"";return e.stylize("[Function"+_+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return e.stylize(Date.prototype.toString.call(r),"date");if(x(r))return p(r)}var S,O,A="",j=!1,E=["{","}"];return f(r)&&(j=!0,E=["[","]"]),C(r)&&(A=" [Function"+(r.name?": "+r.name:"")+"]"),b(r)&&(A=" "+RegExp.prototype.toString.call(r)),w(r)&&(A=" "+Date.prototype.toUTCString.call(r)),x(r)&&(A=" "+p(r)),0!==l.length||j&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),O=j?function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)T(t,String(a))?i.push(d(e,t,r,n,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(d(e,t,r,n,o,!0))}),i}(e,r,n,c,l):l.map(function(t){return d(e,r,n,c,t,j)}),e.seen.pop(),o=A,i=E,O.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===o?"":o+"\n ")+" "+O.join(",\n  ")+" "+i[1]:i[0]+o+" "+O.join(", ")+" "+i[1]):E[0]+A+E[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,o,i){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),T(n,o)||(a="["+o+"]"),s||(0>e.seen.indexOf(l.value)?(s=m(r)?u(e,l.value,null):u(e,l.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),v(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return _(e)&&"[object RegExp]"===S(e)}function _(e){return"object"==typeof e&&null!==e}function w(e){return _(e)&&"[object Date]"===S(e)}function x(e){return _(e)&&("[object Error]"===S(e)||e instanceof Error)}function C(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(v(i)&&(i=n.env.NODE_DEBUG||""),!a[e=e.toUpperCase()]){if(RegExp("\\b"+e+"\\b","i").test(i)){var r=n.pid;a[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else a[e]=function(){}}return a[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=h,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=_,t.isDate=w,t.isError=x,t.isFunction=C,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(384);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,r;console.log("%s - %s",(r=[O((e=new Date).getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":"),[e.getDate(),A[e.getMonth()],r].join(" ")),t.format.apply(t,arguments))},t.inherits=r(717),t._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return n[e].call(r.exports,r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{i.r(a),i.d(a,{LSPluginUser:()=>tO,setupPluginUserInstance:()=>tA});var n,o,s,l,c,u,p=i(520);i(856);let d=function(e,t){return e===t||e!=e&&t!=t},f=function(e,t){for(var r=e.length;r--;)if(d(e[r][0],t))return r;return -1};var h=Array.prototype.splice;function m(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}m.prototype.clear=function(){this.__data__=[],this.size=0},m.prototype.delete=function(e){var t=this.__data__,r=f(t,e);return!(r<0||(r==t.length-1?t.pop():h.call(t,r,1),--this.size,0))},m.prototype.get=function(e){var t=this.__data__,r=f(t,e);return r<0?void 0:t[r][1]},m.prototype.has=function(e){return f(this.__data__,e)>-1},m.prototype.set=function(e,t){var r=this.__data__,n=f(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};let g="object"==typeof e&&e&&e.Object===Object&&e;var y="object"==typeof self&&self&&self.Object===Object&&self;let v=g||y||Function("return this")(),b=v.Symbol;var _=Object.prototype,w=_.hasOwnProperty,x=_.toString,C=b?b.toStringTag:void 0,S=Object.prototype.toString,O=b?b.toStringTag:void 0;let A=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":O&&O in Object(e)?function(e){var t=w.call(e,C),r=e[C];try{e[C]=void 0;var n=!0}catch(e){}var o=x.call(e);return n&&(t?e[C]=r:delete e[C]),o}(e):S.call(e)},T=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},j=function(e){if(!T(e))return!1;var t=A(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},E=v["__core-js_shared__"];var k,F=(k=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"",L=Function.prototype.toString,I=/^\[object .+?Constructor\]$/,M=Object.prototype,N=Function.prototype.toString,R=M.hasOwnProperty,D=RegExp("^"+N.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let U=function(e,t){var r=null==e?void 0:e[t];return!(!T(r)||F&&F in r)&&(j(r)?D:I).test(function(e){if(null!=e){try{return L.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(r))?r:void 0},z=U(v,"Map"),P=U(Object,"create");var $=Object.prototype.hasOwnProperty,H=Object.prototype.hasOwnProperty;function q(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}q.prototype.clear=function(){this.__data__=P?P(null):{},this.size=0},q.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},q.prototype.get=function(e){var t=this.__data__;if(P){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return $.call(t,e)?t[e]:void 0},q.prototype.has=function(e){var t=this.__data__;return P?void 0!==t[e]:H.call(t,e)},q.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=P&&void 0===t?"__lodash_hash_undefined__":t,this};let B=function(e,t){var r,n=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map};function W(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function G(e){var t=this.__data__=new m(e);this.size=t.size}W.prototype.clear=function(){this.size=0,this.__data__={hash:new q,map:new(z||m),string:new q}},W.prototype.delete=function(e){var t=B(this,e).delete(e);return this.size-=t?1:0,t},W.prototype.get=function(e){return B(this,e).get(e)},W.prototype.has=function(e){return B(this,e).has(e)},W.prototype.set=function(e,t){var r=B(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},G.prototype.clear=function(){this.__data__=new m,this.size=0},G.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},G.prototype.get=function(e){return this.__data__.get(e)},G.prototype.has=function(e){return this.__data__.has(e)},G.prototype.set=function(e,t){var r=this.__data__;if(r instanceof m){var n=r.__data__;if(!z||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new W(n)}return r.set(e,t),this.size=r.size,this};let J=function(){try{var e=U(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Z=function(e,t,r){"__proto__"==t&&J?J(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},V=function(e,t,r){(void 0===r||d(e[t],r))&&(void 0!==r||t in e)||Z(e,t,r)},K=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),a=i.length;a--;){var s=i[++n];if(!1===t(o[s],s,o))break}return e};var Y=r&&!r.nodeType&&r,X=Y&&t&&!t.nodeType&&t,Q=X&&X.exports===Y?v.Buffer:void 0,ee=Q?Q.allocUnsafe:void 0;let et=v.Uint8Array,er=function(e,t){var r,n,o=t?(n=new(r=e.buffer).constructor(r.byteLength),new et(n).set(new et(r)),n):e.buffer;return new e.constructor(o,e.byteOffset,e.length)};var en=Object.create;let eo=function(){function e(){}return function(t){if(!T(t))return{};if(en)return en(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),ei=(ea=Object.getPrototypeOf,es=Object,function(e){return ea(es(e))});var ea,es,el=Object.prototype;let ec=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||el)},eu=function(e){return null!=e&&"object"==typeof e},ep=function(e){return eu(e)&&"[object Arguments]"==A(e)};var ed=Object.prototype,ef=ed.hasOwnProperty,eh=ed.propertyIsEnumerable;let em=ep(function(){return arguments}())?ep:function(e){return eu(e)&&ef.call(e,"callee")&&!eh.call(e,"callee")},eg=Array.isArray,ey=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ev=function(e){return null!=e&&ey(e.length)&&!j(e)};var eb=r&&!r.nodeType&&r,e_=eb&&t&&!t.nodeType&&t,ew=e_&&e_.exports===eb?v.Buffer:void 0;let ex=(ew?ew.isBuffer:void 0)||function(){return!1};var eC=Object.prototype,eS=Function.prototype.toString,eO=eC.hasOwnProperty,eA=eS.call(Object),eT={};eT["[object Float32Array]"]=eT["[object Float64Array]"]=eT["[object Int8Array]"]=eT["[object Int16Array]"]=eT["[object Int32Array]"]=eT["[object Uint8Array]"]=eT["[object Uint8ClampedArray]"]=eT["[object Uint16Array]"]=eT["[object Uint32Array]"]=!0,eT["[object Arguments]"]=eT["[object Array]"]=eT["[object ArrayBuffer]"]=eT["[object Boolean]"]=eT["[object DataView]"]=eT["[object Date]"]=eT["[object Error]"]=eT["[object Function]"]=eT["[object Map]"]=eT["[object Number]"]=eT["[object Object]"]=eT["[object RegExp]"]=eT["[object Set]"]=eT["[object String]"]=eT["[object WeakMap]"]=!1;var ej=r&&!r.nodeType&&r,eE=ej&&t&&!t.nodeType&&t,ek=eE&&eE.exports===ej&&g.process,eF=function(){try{return eE&&eE.require&&eE.require("util").types||ek&&ek.binding&&ek.binding("util")}catch(e){}}(),eL=eF&&eF.isTypedArray;let eI=eL?function(e){return eL(e)}:function(e){return eu(e)&&ey(e.length)&&!!eT[A(e)]},eM=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var eN=Object.prototype.hasOwnProperty;let eR=function(e,t,r){var n=e[t];eN.call(e,t)&&d(n,r)&&(void 0!==r||t in e)||Z(e,t,r)};var eD=/^(?:0|[1-9]\d*)$/;let eU=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&eD.test(e))&&e>-1&&e%1==0&&e<t};var ez=Object.prototype.hasOwnProperty;let eP=function(e,t){var r=eg(e),n=!r&&em(e),o=!r&&!n&&ex(e),i=!r&&!n&&!o&&eI(e),a=r||n||o||i,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=s.length;for(var c in e)!t&&!ez.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||eU(c,l))||s.push(c);return s};var e$=Object.prototype.hasOwnProperty;let eH=function(e){if(!T(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ec(e),r=[];for(var n in e)("constructor"!=n||!t&&e$.call(e,n))&&r.push(n);return r},eq=function(e){return ev(e)?eP(e,!0):eH(e)},eB=function(e,t,r,n,o,i,a){var s=eM(e,r),l=eM(t,r),c=a.get(l);if(c)V(e,r,c);else{var u=i?i(s,l,r+"",e,t,a):void 0,p=void 0===u;if(p){var d=eg(l),f=!d&&ex(l),h=!d&&!f&&eI(l);u=l,d||f||h?eg(s)?u=s:eu(s)&&ev(s)?u=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(s):f?(p=!1,u=function(e,t){if(t)return e.slice();var r=e.length,n=ee?ee(r):new e.constructor(r);return e.copy(n),n}(l,!0)):h?(p=!1,u=er(l,!0)):u=[]:function(e){if(!eu(e)||"[object Object]"!=A(e))return!1;var t=ei(e);if(null===t)return!0;var r=eO.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&eS.call(r)==eA}(l)||em(l)?(u=s,em(s)?u=function(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),o?Z(r,s,l):eR(r,s,l)}return r}(s,eq(s)):T(s)&&!j(s)||(u="function"!=typeof l.constructor||ec(l)?{}:eo(ei(l)))):p=!1}p&&(a.set(l,u),o(u,l,n,i,a),a.delete(l)),V(e,r,u)}},eW=function e(t,r,n,o,i){t!==r&&K(r,function(a,s){if(i||(i=new G),T(a))eB(t,r,s,n,e,o,i);else{var l=o?o(eM(t,s),a,s+"",t,r,i):void 0;void 0===l&&(l=a),V(t,s,l)}},eq)},eG=function(e){return e},eJ=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)};var eZ=Math.max;let eV=J?function(e,t){return J(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:eG;var eK=Date.now;let eY=(n=0,o=0,function(){var e=eK(),t=16-(e-o);if(o=e,t>0){if(++n>=800)return arguments[0]}else n=0;return eV.apply(void 0,arguments)}),eX=(u=function(e,t,r){eW(e,t,r)},eY((l=s=function(e,t){var r=-1,n=t.length,o=n>1?t[n-1]:void 0,i=n>2?t[2]:void 0;for(o=u.length>3&&"function"==typeof o?(n--,o):void 0,i&&function(e,t,r){if(!T(r))return!1;var n=typeof t;return!!("number"==n?ev(r)&&eU(t,r.length):"string"==n&&(t in r))&&d(r[t],e)}(t[0],t[1],i)&&(o=n<3?void 0:o,n=1),e=Object(e);++r<n;){var a=t[r];a&&u(e,a,r)}return e},c=eZ((c=void 0,l.length-1),0),function(){for(var e=arguments,t=-1,r=eZ(e.length-c,0),n=Array(r);++t<r;)n[t]=e[c+t];t=-1;for(var o=Array(c+1);++t<c;)o[t]=e[t];return o[c]=eG(n),eJ(l,this,o)}),s+"")),eQ="win32"===navigator.platform.toLowerCase()?p.win32:p.posix;function e0(e,t){let r,n,o=!1,i=t=>r=>{e&&clearTimeout(e),t(r),o=!0},a=new Promise((o,a)=>{r=i(o),n=i(a),e&&(e=setTimeout(()=>n(Error(`[deferred timeout] ${t}`)),e))});return{created:Date.now(),setTag:e=>t=e,resolve:r,reject:n,promise:a,get settled(){return o}}}var e1=i(227),e3=i.n(e1);let e9="application/x-postmate-v1+json",e2=0,e6={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},e5=(e,t)=>!("string"==typeof t&&e.origin!==t||!e.data||"object"==typeof e.data&&!("postmate"in e.data)||e.data.type!==e9||!e6[e.data.postmate]);class e4{parent;frame;child;events={};childOrigin;listener;constructor(e){this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=e=>{if(!e5(e,this.childOrigin))return!1;let{data:t,name:r}=((e||{}).data||{}).value||{};"emit"===e.data.postmate&&r in this.events&&this.events[r].forEach(e=>{e.call(this,t)})},this.parent.addEventListener("message",this.listener,!1)}get(e){return new Promise(t=>{let r=++e2,n=e=>{e.data.uid===r&&"reply"===e.data.postmate&&(this.parent.removeEventListener("message",n,!1),t(e.data.value))};this.parent.addEventListener("message",n,!1),this.child.postMessage({postmate:"request",type:e9,property:e,uid:r},this.childOrigin)})}call(e,t){this.child.postMessage({postmate:"call",type:e9,property:e,data:t},this.childOrigin)}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class e8{model;parent;parentOrigin;child;constructor(e){this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",e=>{if(!e5(e,this.parentOrigin))return;let{property:t,uid:r,data:n}=e.data;"call"!==e.data.postmate?((e,t)=>{let r="function"==typeof e[t]?e[t]():e[t];return Promise.resolve(r)})(this.model,t).then(n=>{e.source.postMessage({property:t,postmate:"reply",type:e9,uid:r,value:n},e.origin)}):t in this.model&&"function"==typeof this.model[t]&&this.model[t](n)})}emit(e,t){this.parent.postMessage({postmate:"emit",type:e9,value:{name:e,data:t}},this.parentOrigin)}}class e7{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(e){this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){let t=(e=>{let t=document.createElement("a");t.href=e;let r=t.protocol.length>4?t.protocol:window.location.protocol,n=t.host.length?"80"===t.port||"443"===t.port?t.hostname:t.host:window.location.host;return t.origin||`${r}//${n}`})(e=e||this.url),r,n=0;return new Promise((o,i)=>{let a=e=>!!e5(e,t)&&("handshake-reply"===e.data.postmate?(clearInterval(r),this.parent.removeEventListener("message",a,!1),this.childOrigin=e.origin,o(new e4(this))):i("Failed handshake"));this.parent.addEventListener("message",a,!1);let s=()=>{n++,this.child.postMessage({postmate:"handshake",type:e9,model:this.model},t),5===n&&clearInterval(r)};this.frame.addEventListener("load",()=>{s(),r=setInterval(s,500)}),this.frame.src=e})}}class te{child;model;parent;parentOrigin;constructor(e){this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((e,t)=>{let r=n=>{if(n.data.postmate){if("handshake"===n.data.postmate){this.child.removeEventListener("message",r,!1),n.source.postMessage({postmate:"handshake-reply",type:e9},n.origin),this.parentOrigin=n.origin;let t=n.data.model;return t&&Object.keys(t).forEach(e=>{this.model[e]=t[e]}),e(new e8(this))}return t("Handshake Reply Failed")}};this.child.addEventListener("message",r,!1)})}}var tt=i(729),tr=i.n(tt);let{importHTML:tn,createSandboxContainer:to}=window.QSandbox||{};function ti(e,t){return e.startsWith("http")?fetch(e,t):(e=e.replace("file://",""),new Promise(async(t,r)=>{try{let r=await window.apis.doAction(["readFile",e]);t({text:()=>r})}catch(e){console.error(e),r(e)}}))}class ta extends tr(){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(e){super(),this._pluginLocal=e,e._dispose(()=>{this._unmount()})}async load(){let{name:e,entry:t}=this._pluginLocal.options;if(this.loaded||!t)return;let{template:r,execScripts:n}=await tn(t,{fetch:ti});this._mount(r,document.body);let o=to(e,{elementGetter:()=>this._root?.firstChild}).instance.proxy;o.__shadow_mode__=!0,o.LSPluginLocal=this._pluginLocal,o.LSPluginShadow=this,o.LSPluginUser=o.logseq=new tO(this._pluginLocal.toJSON(),this._pluginLocal.caller);let i=await n(o,!0);this._unmountFns.push(i.unmount),this._loaded=!0}_mount(e,t){let r=this._frame=document.createElement("div");r.classList.add("lsp-shadow-sandbox"),r.id=this._pluginLocal.id,this._root=r.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,t.appendChild(r),this.emit("mounted")}_unmount(){for(let e of this._unmountFns)e&&e.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}let ts=e3()("LSPlugin:caller"),tl="#await#response#",tc="#lspmsg#error#",tu=e=>`#lspmsg#${e}`;class tp extends tr(){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(e){super(),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;let{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;let t=this,r=null!=this._pluginLocal,n=0,o=new Map,i=e0(5e3),a=this._extendUserModel({"#lspmsg#ready#":async e=>{a[tu(e?.pid)]=({type:e,payload:r})=>{ts(`[call from host (_call)] ${this._debugTag}`,e,r),t.emit(e,r)},await i.resolve()},"#lspmsg#beforeunload#":async e=>{let r=e0(1e4);t.emit("beforeunload",Object.assign({actor:r},e)),await r.promise},"#lspmsg#settings#":async({type:e,payload:r})=>{t.emit("settings:changed",r)},"#lspmsg#":async({ns:e,type:r,payload:n})=>{ts(`[call from host (async)] ${this._debugTag}`,e,r,n),e&&e.startsWith("hook")?t.emit(`${e}:${r}`,n):t.emit(r,n)},"#lspmsg#reply#":({_sync:e,result:t})=>{if(ts(`[sync reply] #${e}`,t),o.has(e)){let r=o.get(e);r&&(t?.hasOwnProperty(tc)?r.reject(t[tc]):r.resolve(t),o.delete(e))}},...e});if(r)return await i.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));let s=new te(a).sendHandshakeReply();return this._status="pending",await s.then(e=>{this._child=e,this._connected=!0,this._call=async(t,r={},i)=>{if(i){let e=++n;o.set(e,i),r._sync=e,i.setTag(`async call #${e}`),ts("async call #",e)}return e.emit(tu(a.baseInfo.id),{type:t,payload:r}),i?.promise},this._callUserModel=async(e,t)=>{try{a[e](t)}catch(t){ts(`[model method] #${e} not existed`)}},setInterval(()=>{if(o.size>100)for(let[e,t]of o)t.settled&&o.delete(e)},18e5)}).finally(()=>{this._status=void 0}),await i.promise,a.baseInfo}async call(e,t={}){return this._call?.call(this,e,t)}async callAsync(e,t={}){let r=e0(1e4);return this._call?.call(this,e,t,r)}async callUserModel(e,t={}){return this._callUserModel?.call(this,e,t)}async _setupIframeSandbox(){let e=this._pluginLocal,t=e.id,r=new URL(e.options.entry);r.searchParams.set("__v__",e.options.version);let n=document.querySelector(`#${t}`);n&&n.parentElement.removeChild(n);let o=document.createElement("div");o.classList.add("lsp-iframe-sandbox-container"),o.id=t;try{let e=(await this._pluginLocal._loadLayoutsData())?.$$0;if(e){o.dataset.inited_layout="true";let{width:t,height:r,left:n,top:i}=e;Object.assign(o.style,{width:t+"px",height:r+"px",left:n+"px",top:i+"px"})}}catch(e){console.error("[Restore Layout Error]",e)}document.body.appendChild(o);let i,a=new e7({id:t+"_iframe",container:o,url:r.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}}).sendHandshake();return this._status="pending",new Promise((t,r)=>{i=setTimeout(()=>{r(Error("handshake Timeout"))},3e3),a.then(r=>{this._parent=r,this._connected=!0,this.emit("connected"),r.on(tu(e.id),({type:e,payload:t})=>{ts("[call from plugin] ",e,t),this._pluginLocal?.emit(e,t||{})}),this._call=async(...t)=>{await r.call(tu(e.id),{type:t[0],payload:Object.assign(t[1]||{},{$$pid:e.id})})},this._callUserModel=async(e,t)=>{if(e.startsWith(tl))return await r.get(e.replace(tl,""));r.call(e,t)},t(null)}).catch(e=>{r(e)}).finally(()=>{clearTimeout(i)})}).catch(e=>{throw ts("[iframe sandbox] error",e),e}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){let e=this._pluginLocal,t=this._shadow=new ta(e);try{this._status="pending",await t.load(),this._connected=!0,this.emit("connected"),this._call=async(t,r={},n)=>(n&&(r.actor=n),this._pluginLocal?.emit(t,Object.assign(r,{$$pid:e.id})),n?.promise),this._callUserModel=async(...e)=>{let t=e[0];t?.startsWith(tl)&&(t=t.replace(tl,""));let r=e[1]||{},n=this._userModel[t];"function"==typeof n&&await n.call(null,r)}}catch(e){throw ts("[shadow sandbox] error",e),e}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(e){this._debugTag=e}async destroy(){let e=null;this._parent&&(e=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(e=this._getSandboxShadowContainer(),this._shadow.destroy()),e?.parentNode.removeChild(e)}}var td=function(){return(td=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function tf(e){return e.toLowerCase()}var th=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],tm=/[^A-Z0-9]+/gi;function tg(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce(function(e,t){return e.replace(t,r)},e)}class ty{ctx;constructor(e){this.ctx=e}get ctxId(){return this.ctx.baseInfo.id}setItem(e,t){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,t]})}getItem(e){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e]})}removeItem(e){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(e){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e]})}}let tv=Symbol.for("proxy-continue"),tb=e3()("LSPlugin:user");function t_(e,t,r){if("function"!=typeof r)return!1;let{key:n,label:o,desc:i,palette:a,keybinding:s}=t,l=`SimpleCommandHook${n}${++tx}`;this.Editor["on"+l](r),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:n,label:o,type:e,desc:i,keybinding:s},["editor/hook",l]],a]})}let tw={registerCommand:t_,registerCommandPalette(e,t){let{key:r,label:n,keybinding:o}=e;return t_.call(this,"global-palette-command",{key:r,label:n,palette:!0,keybinding:o},t)},registerUIItem(e,t){let r=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[r,e,t]})},registerPageMenuItem(e,t){if("function"!=typeof t)return!1;let r=e+"_"+this.baseInfo.id;t_.call(this,"page-menu-item",{key:r,label:e},t)},setFullScreen(e){let t=(...e)=>this._callWin("setFullScreen",...e);"toggle"===e?this._callWin("isFullScreen").then(e=>{e?t():t(!0)}):e?t(!0):t()}},tx=0,tC={registerSlashCommand(e,t){tb("Register slash command #",this.baseInfo.id,e,t),"function"==typeof t&&(t=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",t]]),t=t.map(e=>{let[t,...r]=e;if("editor/hook"===t){let n=r[0],o=()=>{this.caller?.callUserModel(n)};"function"==typeof n&&(o=n);let i=`SlashCommandHook${t}${++tx}`;e[1]=i,this.Editor["on"+i](o)}return e}),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[e,t]]})},registerBlockContextMenuItem(e,t){if("function"!=typeof t)return!1;let r=e+"_"+this.baseInfo.id;t_.call(this,"block-context-menu-item",{key:r,label:e},t)},scrollToBlockInPage(e,t){this.App.pushState("page",{name:e},{anchor:"block-content-"+t})}},tS={};class tO extends tr(){_baseInfo;_caller;_settingsSchema;_connected=!1;_ui=new Map;_fileStorage;_beforeunloadCallback;constructor(e,t){super(),this._baseInfo=e,this._caller=t,t.on("sys:ui:visible",e=>{e?.toggle&&this.toggleMainUI()}),t.on("settings:changed",e=>{let t=Object.assign({},this.settings),r=Object.assign(this._baseInfo.settings,e);this.emit("settings:changed",{...r},t)}),t.on("beforeunload",async e=>{let{actor:r,...n}=e,o=this._beforeunloadCallback;try{o&&await o(n),r?.resolve(null)}catch(e){console.debug(`${t.debugTag} [beforeunload] `,e),r?.reject(e)}}),this._fileStorage=new ty(this)}async ready(e,t){if(!this._connected)try{"function"==typeof e&&(t=e,e={});let r=await this._caller.connectToParent(e);this._connected=!0,r=eX(this._baseInfo,r),this._settingsSchema&&(r.settings=function(e,t){let r=(t||[]).reduce((e,t)=>("default"in t&&(e[t.key]=t.default),e),{});return Object.assign(r,e)}(r.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),r?.id&&(this._caller.debugTag=`#${r.id} [${r.name}]`),t&&t.call(this,r)}catch(e){console.error("[LSPlugin Ready Error]",e)}}ensureConnected(){if(!this._connected)throw Error("not connected")}beforeunload(e){"function"==typeof e&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){let t="settings:changed";return this.on(t,e),()=>this.off(t,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){let t={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",t),this.emit("ui:visible:changed",t),this._ui.set(t.key,t)}showMainUI(e){let t={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",t),this.emit("ui:visible:changed",t),this._ui.set(t.key,t)}toggleMainUI(){let e=this._ui.get(0);e&&e.visible?this.hideMainUI():this.showMainUI()}get isMainUIVisible(){let e=this._ui.get(0);return!!(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),function(e,...t){try{let r=new URL(e);if(!r.origin)throw Error(null);let n=eQ.join(e.substr(r.origin.length),...t);return r.origin+n}catch(r){return eQ.join(e,...t)}}(this._baseInfo.lsr,e)}_makeUserProxy(e,t){let r=this,n=this.caller;return new Proxy(e,{get(e,o,i){let a=e[o];return function(...e){if(!a||a.apply(r,e)===tv){var i,s;if(t){let r=o.toString().match(/^(once|off|on)/i);if(null!=r){let o=r[0].toLowerCase(),a=r.input.slice(o.length),l=`hook:${t}:${(void 0===i&&(i={}),void 0===(s=td({delimiter:"_"},i))&&(s={}),function(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,n=t.stripRegexp,o=t.transform,i=void 0===o?tf:o,a=t.delimiter,s=void 0===a?" ":a,l=tg(tg(e,void 0===r?th:r,"$1\x00$2"),void 0===n?tm:n,"\x00"),c=0,u=l.length;"\x00"===l.charAt(c);)c++;for(;"\x00"===l.charAt(u-1);)u--;return l.slice(c,u).split("\x00").map(i).join(s)}(a,td({delimiter:"."},s)))}`,c=e[0];return n[o](l,c),"off"!==o?()=>n.off(l,c):void 0}}return n.callAsync("api:call",{tag:t,method:o,args:e})}}}})}_callWin(...e){return this._caller.callAsync("api:call",{method:"_callMainWin",args:e})}get App(){return this._makeUserProxy(tw,"app")}get Editor(){return this._makeUserProxy(tC,"editor")}get DB(){return this._makeUserProxy(tS)}get FileStorage(){return this._fileStorage}}function tA(e,t){return new tO(e,t)}if(null==window.__LSP__HOST__){let e=new tp(null);window.logseq=tA({},e)}})(),a})()}),n("cVm5l");const o=(e=100)=>new Promise(t=>setTimeout(t,e));async function i(){let{data:{children:e}}=await fetch("https://www.reddit.com/r/logseq/hot.json").then(e=>e.json());return(e||[]).map(({data:e},t)=>{let{title:r,selftext:n,url:o,ups:i,downs:a,num_comments:s}=e;return`${t}. [${r}](${o}) [:small.opacity-50 "\u{1F525} ${i} \u{1F4AC} ${s}"]
collapsed:: true    
> ${n}`})}// bootstrap
logseq.ready(/**
 * main entry
 * @param baseInfo
 */function(e){let t=!1;logseq.provideModel({async loadReddits(){if(await logseq.App.getUserConfigs(),t)return;let e="reddit-logseq-hots-news",r=new Date().toLocaleString();logseq.App.pushState("page",{name:e}),await o(300),t=!0;try{let t=await logseq.Editor.getCurrentPage();if(t?.originalName!==e)throw Error("page error");let n=await logseq.Editor.getCurrentPageBlocksTree(),o=n[0];o=await logseq.Editor.insertBlock(o.uuid,"\uD83D\uDE80 Fetching r/logseq ...",{before:!0});let a=await i();a=a.map(e=>({content:e})),await logseq.Editor.insertBatchBlock(o.uuid,a,{sibling:!1}),await logseq.Editor.updateBlock(o.uuid,`## \u{1F516} r/logseq - ${r}`)}catch(e){logseq.App.showMsg(e.toString(),"warning"),console.error(e)}finally{t=!1}}}),logseq.App.registerUIItem("toolbar",{key:"logseq-reddit",template:`
      <a data-on-click="loadReddits"
         class="button">
        <i class="ti ti-brand-reddit"></i>
      </a>
    `}),logseq.provideStyle(`
    [data-injected-ui=logseq-reddit-${e.id}] {
      display: flex;
      align-items: center;
    }
  `)}).catch(console.error);